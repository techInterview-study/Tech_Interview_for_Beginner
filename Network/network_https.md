# π“– HTTPS

## λ©μ°¨

- [1. π”’ HTTPS](#-https)
  - [1.1 β™οΈ SSL / TLS ν”„λ΅ν† μ½](#-ssl--tls-ν”„λ΅ν† μ½)
    - [1.1.1 π‘» SSL / TLS ν”„λ΅ν† μ½ μ•”νΈν™” λ°©μ‹ (ν•μ΄λΈλ¦¬λ“ μ•”νΈν™” μ‹μ¤ν…)](#-ssl--tls-ν”„λ΅ν† μ½-μ•”νΈν™”-λ°©μ‹-ν•μ΄λΈλ¦¬λ“-μ•”νΈν™”-μ‹μ¤ν…)
    - [1.1.2 π§ λ¬Έμ μ  1: κ³µν†µν‚¤ μ•”νΈ ν•κ³„, λ„μ²­ μ„ν—](#-λ¬Έμ μ -1-κ³µν†µν‚¤-μ•”νΈ-ν•κ³„-λ„μ²­-μ„ν—)
    - [1.1.3 π ν•΄κ²°μ±… 1: κ³µκ°ν‚¤ μ•”νΈν™” λ°©μ‹μΌλ΅ λ„μ²­ λ°©μ§€](#-ν•΄κ²°μ±…-1-κ³µκ°ν‚¤-μ•”νΈν™”-λ°©μ‹μΌλ΅-λ„μ²­-λ°©μ§€)
    - [1.1.4 π§ λ¬Έμ μ  2: ν†µμ‹  μƒλ€ κ²€μ¦μ΄ μ•λ¨, μ„μ¥ μ„ν—](#-λ¬Έμ μ -2-ν†µμ‹ -μƒλ€-κ²€μ¦μ΄-μ•λ¨-μ„μ¥-μ„ν—)
    - [1.1.5 π ν•΄κ²°μ±… 2: κ³µκ°ν‚¤ μ‹ μ›μ„ μ¦λ…ν•΄μ£Όλ” CAκΈ°κ΄€](#-ν•΄κ²°μ±…-2-κ³µκ°ν‚¤-μ‹ μ›μ„-μ¦λ…ν•΄μ£Όλ”-caκΈ°κ΄€)
  - [1.2 β›“ CA κ³µκ°ν‚¤ μ¦λ…μ„ μΈμ¦ λ°©μ‹](#-ca-κ³µκ°ν‚¤-μ¦λ…μ„-μΈμ¦-λ°©μ‹)
  - [1.3 π“ HTTPS HandShake ν†µμ‹  κ³Όμ •](#-https-handshake-ν†µμ‹ -κ³Όμ •)
- [2. μ°Έμ΅°](#-μ°Έμ΅°)

# π”’ HTTPS

> μΈν„°λ„· μƒμ—μ„ μ •λ³΄λ¥Ό μ•”νΈν™”ν•λ” TLS ν”„λ΅ν† μ½μ„ μ‚¬μ©ν•΄ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ μμ›μ„ μ£Όκ³  λ°›μ„ λ• μ“°λ” ν†µμ‹  κ·μ•½

<div align="center">
    <img src = "./img/network_https_1.jpg" alt="HTTPS μ΄λ―Έμ§€" width="400">
</div> 

<br/>

π”Ή λ¨Όμ €, HTTPλ€ HyperText Transfer Protocolμ μ•½μλ΅μ¨, μΈν„°λ„·μ—μ„ HTMLκ³Ό κ°™μ€ λ¬Έμ„λ¥Ό μ›Ή λΈλΌμ°μ €κ°€ μ›Ή μ„λ²„μ— μ”μ²­ν•  λ•μ ν†µμ‹  κ·μ•½(Protocol)μ΄λ‹¤.

HTTPλ” Application κ³„μΈµμ— μ†ν•κ³  μ •λ³΄λ¥Ό ν…μ¤νΈλ΅ μ£Όκ³  λ°›κΈ° λ•λ¬Έμ— λ„¤νΈμ›ν¬μ—μ„ μ „μ†΅ μ‹ νΈλ¥Ό μΈν„°μ…‰νΈ ν•λ” κ²½μ° μ›ν•μ§€ μ•λ” λ°μ΄ν„° μ μ¶μ΄ λ°μƒν•λ” λ“± λ‹¤μ–‘ν• λ¬Έμ κ°€ λ°μƒν•λ‹¤. <br/><br/>

**1) ν‰λ¬Έ(μ•”νΈν™” x) ν†µμ‹ μ΄κΈ° λ•λ¬Έμ— λ„μ²­ κ°€λ¥**

> κ°™μ€ μ„Έκ·Έλ¨ΌνΈ λ„μ²­μ€ μ–΄λ µμ§€ μ•λ‹¤. ν¨ν‚·μ„ ν•΄μ„ν•λ” ν¨ν‚· μΊ΅μ²λ‚ μ¤λ‹νΌλΌλ” ν΄μ„ μ΄μ©ν•΄ λ„¤νΈμ›ν¬ μƒμ— νλ¥΄κ³  μλ” ν¨ν‚·μ„ μμ§‘ν•λ©΄ λλ‹¤.

λ€μ•

π”Ή TLSκ°™μ€ ν”„λ΅ν†¨μ½μ„ μ‚¬μ©ν•μ—¬ ν†µμ‹ μ„ μ•”νΈν™” μ‹ν‚¤λ” λ°©λ²• <br/><br/>
 
**2) ν†µμ‹  μƒλ€λ¥Ό ν™•μΈν•μ§€ μ•κΈ° λ•λ¬Έμ— μ„μ¥ κ°€λ¥**

> HTTPλ¥Ό μ‚¬μ©ν• μ”μ²­μ΄λ‚ μ‘λ‹µμ—μ„λ” μƒλ€λ¥Ό ν™•μΈν•μ§€ μ•λ”λ‹¤. μ”μ²­μ„ λ³΄λ‚Έ μ„λ²„κ°€ μ •λ§ URIλ΅ μ§€μ •λ νΈμ¤νΈμΈμ§€ μ• λ°©λ„κ°€ μ—†λ‹¤.

λ€μ•

π”Ή μƒλ€λ¥Ό ν™•μΈν•λ” μ¦λ…μ„ : TLSμ—μ„ μ¦λ…μ„λ¥Ό μ κ³µν•κΈ° λ•λ¬Έμ— μƒλ€λ¥Ό ν™•μΈν•  μ μλ‹¤. μ¦λ…μ„λ” μ  3μ κΈ°κ΄€(CA)μ— μν•΄ λ°ν–‰λλ” κ²ƒμ΄κΈ° λ•λ¬Έμ— μ„λ²„λ‚ ν΄λΌμ΄μ–ΈνΈκ°€ μ‹¤μ¬ν•λ” μ‚¬μ‹¤μ„ μ¦λ…ν•λ‹¤. <br/><br/>

**3) μ™„μ „μ„±μ„ μ¦λ…ν•  μ μ—†κΈ° λ•λ¬Έμ— λ³€μ΅° κ°€λ¥**

> μ™„μ „μ„±μ΄λ€ μ •λ³΄μ μ •ν™•μ„±μ„ κ°€λ¦¬ν‚¨λ‹¤. μ™„μ „μ„±μ„ μ¦λ…ν•  μ μ—†λ‹¤λ” κ²ƒμ€ μ •λ³΄κ°€ μ •ν™•ν•μ§€ μ•„λ‹μ§€λ¥Ό ν™•μΈν•  μ μ—†λ‹¤λ” λ»μ΄λ‹¤. μλ΅ κ³µκ²©μκ°€ μ¤‘κ°„μ— λΌμ–΄λ“¤μ–΄ μμ‹ ν• λ‚΄μ©μ„ λ³€μ΅°ν•  μ μλ‹¤. (Man-in-the-Middle κ³µκ²©)

λ€μ•

π”Ή HTTPS μ‚¬μ© - TLSμ—λ” μΈμ¦μ΄λ‚ μ•”νΈν™”, λ‹¤μ΄μ μ¤νΈ κΈ°λ¥μ„ μ κ³µν•λ‹¤. <br/><br/>
 
κ·ΈλΌ HTTPSλ” λ­κΉ? μ΄λ¬ν• λ³΄μ• μ·¨μ•½μ μ„ ν•΄κ²°ν•κΈ° μ„ν• ν”„λ΅ν† μ½μ΄ HTTPμ— S(Secure Socket)κ°€ μ¶”κ°€λ κ²ƒμ΄ HTTPSμ΄λ‹¤. κΈ°λ³Έμ μΌλ΅ HTTPSλ” ν¬νΈ 443μ„ μ‚¬μ©ν•λ”λ° μ΄λ” ν¬νΈ 80μ„ μ‚¬μ©ν•λ” HTTPμ™€ HTTPSλ¥Ό κµ¬λ¶„ν•κΈ° μ„ν•¨ μ΄λ‹¤.

κ·Έλ ‡λ‹¤λ©΄ Secure Socketμ€ μ–΄λ–¤ λ°©μ‹μΌλ΅ HTTPμ λ³΄μ• μ·¨μ•½μ μ„ ν•΄κ²°ν• κΉ? 

<br/>

## β™οΈ SSL / TLS ν”„λ΅ν† μ½

<div align="center">
    <img src = "./img/network_https_2.png" alt="μ•”νΈν™” μ΄λ―Έμ§€" width="350">
</div> 

<br/>

π”Ή HTTPSλ” κ·Έλ¦Όμ—μ„ λ³Ό μ μλ“―μ΄ μ•”νΈν™” ν”„λ΅ν† μ½μ„ μ‚¬μ©ν•μ—¬ ν†µμ‹ μ„ μ•”νΈν™”ν•λ‹¤. μ¦‰, SSL / TLS ν”„λ΅ν† μ½μ€ μ•”νΈν™” λ°©μ‹μ„ ν†µν•΄ μ„Έμ… λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•λ‹¤λ” κ²ƒμ„ μ• μ μλ‹¤. μ΄ ν”„λ΅ν† μ½μ€ μ΄μ „μ—λ” λ³΄μ• μ†μΌ“ κ³„μΈµ(SSL)μΌλ΅ μ•λ ¤μ΅μ§€λ§, ν„μ¬λ” μ „μ†΅ κ³„μΈµ λ³΄μ•(TLS)μ΄λΌκ³  λ¶λ¦°λ‹¤.

```
[μ°Έκ³ ] TLS

Transport Layer Securityμ μ¤„μ„λ§. κ³Όκ±° SSLμ—μ„ λ°μ „ν•λ©° μ΄λ¦„μ΄ λ³€κ²½ λ κ²ƒμ΄λ‹¤. ν•μ§€λ§ μ•„μ§λ„ SSLμ΄λ€ λ…μΉ­μ΄ λ§μ΄ μ‚¬μ©λκ³  μλ‹¤.
```

<br/>

### π‘» SSL / TLS ν”„λ΅ν† μ½ μ•”νΈν™” λ°©μ‹ (ν•μ΄λΈλ¦¬λ“ μ•”νΈν™” μ‹μ¤ν…)

SSL / TLS ν”„λ΅ν† μ½μ€ λ€μΉ­κ³Ό λΉ„λ€μΉ­ ν‚¤ μ•”νΈν™” λ°©μ‹μ„ νΌν•©ν• ν•μ΄λΈλ¦¬λ“ μ•”νΈν™” λ°©μ‹μ„ μ‚¬μ©ν•λ‹¤.

<div align="center">
    <img src = "./img/network_https_3.png" alt="μ•”νΈν™” λ°©μ‹ μ΄λ―Έμ§€" width="550">
</div> 

### π§ λ¬Έμ μ  1: κ³µν†µν‚¤ μ•”νΈ ν•κ³„, λ„μ²­ μ„ν—

π–‹ λ€μΉ­ν‚¤μ κ²½μ° λΉ„λ€μΉ­ ν‚¤ μ•”νΈν™” λ°©μ‹μ— λΉ„ν•΄ κ³„μ‚°κ³Όμ •μ΄ λ‹¨μν•μ—¬ μ†λ„κ°€ λΉ λ¥΄μ§€λ§ μ•”νΈν™”μ™€ λ³µνΈν™”μ— ν•λ‚μ ν‚¤(κ³µν†µν‚¤)λ¥Ό κ°™μ΄ μ‚¬μ©ν•λ” λ°©μ‹μ΄κΈ° λ•λ¬Έμ— μƒλ€λ°©μ—κ² ν‚¤λ¥Ό λ„κ²¨μ¤„ λ•κ°€ μ·¨μ•½ν•λ‹¤. κ·Έλμ„ λ„μ²­ν•  μ μ—†λ„λ΅ λ„¤νΈμ›ν¬ ν†µμ‹  μμ²΄λ¥Ό μ•”νΈν™”ν•΄μ„ μ•μ „ν•κ² λ°°μ†΅ν•κΈ° ν•΄μ¤μ•Ό ν•λ‹¤. <br/>

π–‹ μ•μ „ν•κ² λ°°μ†΅ν•κΈ° μ„ν•΄ ν•„μ”ν• λ°©μ‹μ΄ λ°”λ΅ λ‘ κ°μ ν‚¤(λΉ„λ€μΉ­ν‚¤)λ¥Ό μ‚¬μ©ν•λ” κ³µκ°ν‚¤ λ°©μ‹μ΄λ‹¤.

### π ν•΄κ²°μ±… 1: κ³µκ°ν‚¤ μ•”νΈν™” λ°©μ‹μΌλ΅ λ„μ²­ λ°©μ§€

π–‹ TLSλ” λ„μ²­μ„ ν•  μ μ—†λ„λ΅ κ³µκ°ν‚¤ μ•”νΈ λ°©μ‹μ„ μ‚¬μ©ν•λ‹¤.

- κ³µν†µν‚¤(λ€μΉ­ν‚¤) ν•κ³„: μ„λ΅ κ³µμ ν•λ‹¤κ°€ ν•΄μ»¤ν•ν… κ±Έλ¦¬λ©΄ λ³΄μ•μ΄ λ«λ¦΄ μλ„ μλ‹¤.
 
π–‹ κ³µκ°ν‚¤ μ•”νΈλ°©μ‹μ€ λ‘ κ°μ ν‚¤(λΉ„λ°€ν‚¤, κ³µκ°ν‚¤)κ°€ μλ‹¤. κ³µκ°ν‚¤λ” λ„κµ¬μ—κ²λ‚ κ³µμ ν•΄λ„ λμ§€λ§ κ°μΈν‚¤λ” λ„κµ¬μ—κ²λ„ μ•λ ¤μ§€λ©΄ μ•λλ‹¤. Aκ°€ Naverμ—κ² λ©”μ„Έμ§€λ¥Ό λ³΄λ‚Έλ‹¤κ³  ν• λ• κ³µκ°ν‚¤ μ•”νΈλ°©μ‹μ„ μ‚¬μ©ν•λ©΄ λ‹¤μκ³Ό κ°™λ‹¤.

```
A(Client) β†’ Naver(Server)

Aκ°€ Naverμ κ³µκ°ν‚¤λ¥Ό μ‚¬μ©ν•μ—¬ λ©”μ„Έμ§€λ¥Ό μ•”νΈν™”ν•μ—¬ μ „μ†΅ν•λ‹¤.
Naverλ” ν•΄λ‹Ή μ•”νΈν™”λ μ •λ³΄λ¥Ό λ°›μ•„λ“¤μ—¬ μμ‹ μ λΉ„λ°€ν‚¤λ΅ λ³µνΈν™”ν•μ—¬ λ©”μ„Έμ§€λ¥Ό μ½λ”λ‹¤.
Naverλ” μ•”νΈν™”λ” κ³µκ°ν‚¤λ¥Ό μ‚¬μ©ν–κ³ , λ³µνΈν™”λ” λΉ„λ°€ν‚¤λ¥Ό μ‚¬μ©ν–λ‹¤. λ”°λΌμ„ Naverμ μμ‹ μ λΉ„λ°€ν‚¤λ¥Ό λ„λ‚λ‹Ήν•μ§€ μ•λ” μ΄μƒ λ„μ²­μ— λ€ν• μ„ν—μ€ μ—†λ‹¤
```

π–‹ κ·Έλ°λ° μ΄λ¬ν• κ³µκ°ν‚¤ μ•”νΈ λ°©μ‹μ€ μ†λ„κ°€ λ§¤μ° λλ¦¬λ‹¤. λ©”μ„Έμ§€λ¥Ό μ•”νΈν™”ν•κ³  λ³µνΈν™”ν•λ”λ° λ§μ€ μμ›μ„ ν•„μ”λ΅ ν•λ‹¤. κ·Έλμ„ HTTPSλ” κ³µν†µν‚¤μ™€ κ³µκ°ν‚¤λ¥Ό μ„μ–΄μ„ μ‚¬μ©ν•κΈ°λ΅ ν• κ²ƒμ΄λ‹¤.

π–‹ κ³µν†µν‚¤ μ•”νΈλ΅ μ‚¬μ©λλ” ν•΄μ‰¬κ°’(pre-master-secret)μ„ κ³µκ°ν‚¤ μ•”νΈν™”ν•΄μ„ μ•μ „ν•κ² μ„λ²„μ—κ² μ „μ†΅ν•λ‹¤. κ·Έλ ‡κ² μ•μ „ν•κ² μ„λ΅μ κ³µν†µν‚¤λ¥Ό μƒμ„±ν•κ³ λ‚λ©΄ μ΄μ λ” λ„μ²­μ— λ€ν• μ„ν—μ—†μ΄ κ³µν†µν‚¤ μ•”νΈλ°©μ‹μΌλ΅ μ•μ „ν•κ³  λΉ λ¥΄κ² ν†µμ‹ μ„ μ΄λ£° μ μκ² λλ‹¤. μ¦‰, λ°μ΄ν„° μμ²΄λ” κ³µν†µν‚¤λ¥Ό μ΄μ©ν•΄μ„ μ „λ‹¬ν•μ§€λ§ κ·Έ κ³µν†µν‚¤λ¥Ό μ „λ‹¬λ°›λ” κ³Όμ •μ€ κ³µκ°ν‚¤ λ°©μ‹μ„ ν™μ©ν•λ‹¤.

### π§ λ¬Έμ μ  2: ν†µμ‹  μƒλ€ κ²€μ¦μ΄ μ•λ¨, μ„μ¥ μ„ν—

κ·Έλ°λ° κ³µν†µν‚¤λ¥Ό μ „λ‹¬ν•΄μ•Όν•  κ³µκ°ν‚¤ λ°©μ‹μ—λ„ λ¬Έμ κ°€ μλ‹¤. λ°μ΄ν„° μ•”νΈμ—λ” λ©”μ‹μ§€λ¥Ό λ°›μ„ μ‚¬λ(Naver)μ κ³µκ°ν‚¤λ΅ μ•”νΈν™”λ¥Ό μν–‰ν•μ—¬ λ³΄λƒλ‹¤. ν•μ§€λ§ λ§μ•½μ— ν•΄μ»¤κ°€ Naverμ κ³µκ°ν‚¤λ¥Ό κ°€λ΅μ±„κ³  λ³ΈμΈμ κ³µκ°ν‚¤λ΅ λ³΄λƒλ‹¤κ³  μƒκ°ν•΄λ³΄μ. Aλ” κ·Έλ¬λ©΄ ν•΄μ»¤μ κ³µκ°ν‚¤λ΅ μ•”νΈν™”ν•μ—¬ λ³΄λ‚Ό κ²ƒμ΄κ³ , ν•΄μ»¤λ” μμ‹ μ κ°μΈν‚¤λ΅ λ³µνΈν™”ν•μ—¬ κ·Έ λ‚΄μ©μ„ λ³Ό μ μλ‹¤.

### π ν•΄κ²°μ±… 2: κ³µκ°ν‚¤ μ‹ μ›μ„ μ¦λ…ν•΄μ£Όλ” CAκΈ°κ΄€

κ³µκ°ν‚¤ μ•”νΈμ—λ„ μ•½μ μ΄ μλ”λ° λ°”λ΅ κ³µκ°ν‚¤κ°€ μ§„μ§μΈμ§€ μ•„λ‹μ§€ λ¨λ¥Έλ‹¤λ” κ²ƒμ΄λ‹¤. κ·Έλμ„ Cμ™€ κ°™μ€ μ„μ¥κΎΌμ„ κ±Έλ¬λ‚΄κΈ° μ„ν•΄ CA(Certificate Authority) μΈμ¦κΈ°κ΄€μ΄ μ΅΄μ¬ν•λ‹¤. μ΄ κ³Όμ •μ—μ„λ” κ³µκ°ν‚¤ λ°©μ‹μ΄ μ‚¬μ©λλ‹¤.

<br/>

## β›“ CA κ³µκ°ν‚¤ μ¦λ…μ„ μΈμ¦ λ°©μ‹

<div align="center">
    <img src = "./img/network_https_4.png" alt="CA κ³µκ°ν‚¤ μ¦λ… κ³Όμ • μ΄λ―Έμ§€" width="550">
</div> 

<br/>

- μ„λ²„ μ΄μμ(Naver)λ” CA μΈμ¦ κΈ°κ΄€μ— κ³µκ°ν‚¤λ¥Ό μ μ¶ν•λ‹¤. 
- CAλ” μΈμ¦κΈ°κ΄€μ λΉ„λ°€ν‚¤λ΅ μ„λ²„μ κ³µκ°ν‚¤μ— λ””μ§€ν„Έ μ„λ…μΌλ΅ κ³µκ°ν‚¤ μ¦λ…μ„λ¥Ό μ‘μ„±ν•λ‹¤. 
- ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ΄ μ¤λ©΄ μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ—κ² κ³µκ°ν‚¤ μ¦λ…μ„λ¥Ό μ „μ†΅ν•λ‹¤.
- ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ™€ ν†µμ‹ ν•  λ• κ³µκ°ν‚¤ μ¦λ…μ„λ¥Ό CA κ³µκ°ν‚¤λ΅ μ¦λ…ν•κ³  κ³µκ°ν‚¤κ°€ μ •λ§μΈμ§€ ν™•μΈν•λ‹¤. 
    - CA μΈμ¦ κ³µκ°ν‚¤λ” λΈλΌμ°μ €(ν¬λ΅¬, νμ΄μ–΄ν­μ¤, μ—£μ§€ λ“±)μ— λ‚΄μ¥λμ–΄ μλ‹¤. 
    - CA μΈμ¦μ„λ” ν¬λ΅¬ μ„¤μ • > λ³΄μ• λ° κ°μΈμ •λ³΄ λ³΄νΈ > λ³΄μ• > μΈμ¦μ„ κ΄€λ¦¬μ—μ„ ν™•μΈμ΄ κ°€λ¥ν•λ‹¤. 
- ν΄λΌμ΄μ–ΈνΈλ” ν•΄λ‹Ή μ„λ²„ κ³µκ°ν‚¤λ΅ λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•μ—¬ μ„λ²„μ—κ² μ „μ†΅ν•λ‹¤. 
- μ„λ²„λ” μμ‹ μ κ°μΈν‚¤λ΅ ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚Έ λ©”μ‹μ§€λ¥Ό λ³µνΈν™”ν•μ—¬ ν™•μΈν•λ‹¤. <br/>
 
ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ™€ μ•”νΈ ν†µμ‹ μ„ ν•κΈ° μ„ν•΄ μ–΄λ–¤ κ³Όμ •μ΄ μ΄λ¤„μ§€λ”μ§€ μ‚΄ν΄λ΄¤λ‹¤. μ„λ²„λ” CAκΈ°κ΄€μ—κ² μΈμ¦μ„ λ°›μ•„ HTTPS ν†µμ‹ μ΄ κ°€λ¥ν•¨μ„ μ…μ¦ν–κ³  ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„λ” μ΄μ   κ³µκ°ν‚¤ μ•”νΈ λ°©μ‹μ„ μ΄μ©ν•΄ μ„λ΅μ κ³µν†µν‚¤λ¥Ό μƒμ„±ν•λ‹¤. ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ κ³µν†µν‚¤λ¥Ό κ°–κ² λλ©΄ μ΄μ   λΉ„μ© λ¶€λ‹΄μ΄ μ μ€ κ³µν†µν‚¤ λ°©μ‹μΌλ΅ μ•”νΈ ν†µμ‹ μ„ μ΄λ£¬λ‹¤.
 
μ΄μ™€ κ°™μ€ λ°©μ‹μΌλ΅ μ „ν™μ„ ν•κ² λλ‹¤. λ„μ²­μ μ„ν—μ„ κ³µκ°ν‚¤λ΅ μ»¤λ²„ν•κ³  μ•μ „ν•κ² κ³µν†µν‚¤λ¥Ό μƒμ„±ν–μΌλ©΄ ν›¨μ”¬ μ†λ„κ°€ λΉ λ¥Έ κ³µν†µν‚¤ μ•”νΈλ°©μ‹μΌλ΅ μ „ν™ν•λ” κ²ƒμ΄λ‹¤. handashake ν†µμ‹  κ³Όμ •μ„ λ³΄λ©° λ” μμ„Έν μ‚΄ν΄λ³΄μ.

<br/>

## π“ HTTPS HandShake ν†µμ‹  κ³Όμ •

<div align="center">
    <img src = "./img/network_https_5.png" alt="HandShake μ΄λ―Έμ§€" width="550">
</div> 

<br/>

**1. ν΄λΌμ΄μ–ΈνΈκ°€ β€Client Helloβ€ λ©”μ‹μ§€λ¥Ό μ†΅μ‹ ν•λ©΄μ„ TLS ν†µμ‹ μ„ μ‹μ‘ν•λ‹¤.**
 
- μ•”νΈ μ¤μ„νΈ(Supported Cipher Suite)λ΅ λ¶λ¦¬λ” λ¦¬μ¤νΈ(μ‚¬μ©ν•λ” μ•”νΈν™” μ•κ³ λ¦¬μ¦μ΄λ‚ ν‚¤ μ‚¬μ΄μ¦ λ“±) <br/>
- client random number(32byte λ‚μ¤) - κ³µν†µν‚¤(master-secret) μ¬λ£ <br/>
- Session ID (if any) <br/>

**2. μ„λ²„κ°€ TLS ν†µμ‹ μ΄ κ°€λ¥ν• κ²½μ° β€Server Helloβ€ λ©”μ‹μ§€λ΅ μ‘λ‹µν•λ‹¤.**

- μ•”νΈ μ¤μ„νΈ(Chosen Cipher Suite): ν΄λΌμ΄μ–ΈνΈκ°€ μ μ‹ν• λ‚΄μ©μ—μ„ μ„ νƒν• λ©λ΅ <br/>
    - ex. TLS_RSA_WITH_AES_128_GCM_SHA256 : ν‚¤ κµν™ RSA, λ€μΉ­ν‚¤ AES_128 GCM, Hash μ•κ³ λ¦¬μ¦μ€ SHA256 <br/>
- server random number(32byte λ‚μ¤): κ³µν†µν‚¤(master-secret) μ¬λ£ <br/>
- Session ID(reuse or new) <br/>

**3. μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ—κ² β€Certficateβ€ λ©”μ„Έμ§€λ¥Ό μ†΅μ‹ ν•λ‹¤.**

- ν•΄λ‹Ή λ©”μ„Έμ§€μ—λ” μμ‹ μ κ³µκ°ν‚¤ μ¦λ…μ„κ°€ ν¬ν•¨λμ–΄ μλ‹¤.

**4. μ„λ²„κ°€ β€ServerHelloDoneβ€ λ©”μ„Έμ§€λ¥Ό μ†΅μ‹ ν•μ—¬ μµμ΄μ TLS λ„¤κ³ μ‹μ—μ΄μ…μ΄ λλ‚¬μμ„ ν†µμ§€ν•λ‹¤.**

**5. ν΄λΌμ΄μ–ΈνΈλ” pre-master-secretμ„ μƒμ„±ν•μ—¬ μ΄λ¥Ό μ„λ²„ κ³µκ°ν‚¤λ΅ μ•”νΈν™”ν•μ—¬ β€Client KeyExchageβ€ λ©”μ„Έμ§€λ¥Ό λ³΄λ‚Έλ‹¤.**

- ν΄λΌμ΄μ–ΈνΈλ” λΈλΌμ°μ €μ— λ‚΄μ¥λ ν‚¤λ¥Ό ν†µν•΄ κ³µκ°ν‚¤ μ¦λ…μ„λ¥Ό λ―μ–΄μ„ μ„λ²„μ κ³µκ°ν‚¤λ¥Ό μ–»λ”λ‹¤. κ·Έλμ„ ν•΄λ‹Ή κ³µκ°ν‚¤λ¥Ό μ‚¬μ©ν•΄ λ³΄λ‚Έ κ²ƒμ΄λ‹¤.

**6. κ·Έλ ‡κ² μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ μ„λ΅ κ°™μ€ master-seceretμ΄λΌλ” κ³µν†µν‚¤λ¥Ό μ μ‘ν•λ‹¤.**

> master-seceret = client random number + server random number + pre-master-secret

- λ§μ•½ λ„μ²­ν•λ” μ‚¬λμ΄ μλ‹¤λ©΄ λ…Έμ¶λ κ°’μ€client random number, server random numberμ΄λ‹¤. pre-master-secretμ€ μ΄λ―Έ ν•©μλ μ•”νΈ μ•κ³ λ¦¬μ¦(ex. RSA)μ„ μ‚¬μ©ν–κΈ° λ•λ¬Έμ— λ…Έμ¶λμ§€ μ•λ”λ‹¤.
- μ„Έ κ°μ κ°’μ„ μ–»μ€ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈλ” κ°κ° ν•΄μ‰¬ μ•”νΈ(ex. SHA256)λ¥Ό μ΄μ©ν•μ—¬ master-secret ν‚¤λ¥Ό μƒμ„±ν•λ‹¤.
- RSA μ•”νΈλ¥Ό μ΄μ©ν• κ³µν†µν‚¤ μƒμ„± λ°©μ‹ μ°Έκ³ 
 
**7. ν΄λΌμ΄μ–ΈνΈλ” β€Change Cipher Specβ€ λ©”μ„Έμ§€λ¥Ό μ†΅μ‹ ν•λ‹¤. κ·Έλ¦¬κ³  ν΄λΌμ΄μ–ΈνΈλ” β€Finishedβ€ λ©”μ„Έμ§€λ¥Ό μ†΅μ‹ ν•λ‹¤.**

- "Change Cipher Spec" λ©”μ‹μ§€λ” μ΄ λ©”μ‹μ§€ μ΄ν›„μ ν†µμ‹ μ€ μ•”νΈν‚¤λ¥Ό μ‚¬μ©ν•΄μ„ μ§„ν–‰ν•λ‹¤λ” κ²ƒμ„ λ‚νƒ€λ‚Έλ‹¤.
- "Finished"λ¥Ό λ³΄λ‚΄λ©΄μ„ ν†µμ‹ μ΄ λλ‚¬μμ„ μ•λ¦°λ‹¤.
 
**8. μ„λ²„λ„ λ§μ°¬κ°€μ§€λ΅ β€Change Cipher Specβ€ λ©”μ„Έμ§€λ¥Ό μ†΅μ‹ ν•κ³  β€Finishedβ€ λ©”μ„Έμ§€λ¥Ό μ†΅μ‹ ν•λ‹¤.**

**9. λ‘λ‹¤ β€Finishedβ€ κµν™μ΄ μ™„λ£λλ©΄ μ΄μ λ” TLSμ— μν•΄ μ ‘μ†μ΄ ν™•λ¦½λλ‹¤.**

- λ”°λΌμ„ μ΄μ λ¶€ν„°λ” κ³µκ°ν‚¤ λ°©μ‹ λ€λΉ„ μ†λ„κ°€ λΉ λ¥Έ κ³µν†µν‚¤ μ•”νΈ λ°©μ‹μΌλ΅ ν†µμ‹ ν•λ―€λ΅ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” μ•μ‹¬ν•κ³  ν†µμ‹ μ΄ μ΄λ£¨μ–΄μ§„λ‹¤.

<br/>

## π“Έ μ°Έμ΅°

https://loosie.tistory.com/718 <br/>
https://rachel-kwak.github.io/2021/03/08/HTTPS.html <br/>
https://velog.io/@averycode/HTTPS-%EA%B7%B8%EB%A6%AC%EA%B3%A0-%EB%B3%B4%EC%95%88


